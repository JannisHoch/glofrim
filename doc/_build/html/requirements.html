
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>3. GLOFRIM requirements and set-up &#8212; GLOFRIM 2 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Running GLOFRIM" href="running_GLOFRIM.html" />
    <link rel="prev" title="2. Model descriptions" href="models.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="running_GLOFRIM.html" title="4. Running GLOFRIM"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="models.html" title="2. Model descriptions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GLOFRIM 2 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="models.html"
                        title="previous chapter">2. Model descriptions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="running_GLOFRIM.html"
                        title="next chapter">4. Running GLOFRIM</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="glofrim-requirements-and-set-up">
<h1>3. GLOFRIM requirements and set-up<a class="headerlink" href="#glofrim-requirements-and-set-up" title="Permalink to this headline">¶</a></h1>
<p>The tool was entirey written in Python 2.7 and tested on Linux systems.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Migration to Python 3.x is envisaged but not scheduled yet. Only after PCRGLOW-WB and WFLOW have switched to using the python 3 and PCRaster &gt;= 4.2.0 this would be possible.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Note that GLOFRIM is not yet tested on Windows systems!
And bmi’d version of CMF has not yet been compiled for Windows.</p>
</div>
<p>To install and run GLOFRIM on your Linux machine, several python packages are required.
For convenience, we recommend to set up GLOFRIM within its own python environment.
You can do so using <a class="reference external" href="https://conda.io/docs/user-guide/tasks/manage-environments.html#creating-an-environment-from-an-environment-yml-file">conda environments</a>
with the provided envrionment.yml file in the glofrim-py folder.</p>
<p>This should also install the required python BMI-wrapper for you:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># create environmnet named glofrim</span>
<span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">environment</span><span class="o">.</span><span class="n">yml</span>
<span class="c1"># activate glofrim environment</span>
<span class="n">source</span> <span class="n">activate</span> <span class="n">glofrim</span>
</pre></div>
</div>
<p>To install GLOFRIM do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># get copy of source code from git repos</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">openearth</span><span class="o">/</span><span class="n">glofrim</span><span class="o">.</span><span class="n">git</span><span class="nd">@csdms</span><span class="o">-</span><span class="n">compliant</span>
<span class="c1"># navigate to the py-glofrim folder</span>
<span class="n">cd</span> <span class="n">glofrim</span><span class="o">/</span><span class="n">py</span><span class="o">-</span><span class="n">glofrim</span>
<span class="c1"># install for (the -e links the source code folder for development, this can be left out)</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">glofrim</span><span class="o">&gt;/</span><span class="n">py</span><span class="o">-</span><span class="n">glofrim</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The currently most stable branch is csdms-compliant. As development and merging goes along, this may change however.
Any change will be documented here.</p>
</div>
<p>Once the glofrim environment is successfully installed, the actual models can be installed.</p>
<div class="section" id="note-for-installing-pcr-and-wfl">
<h2>3.1. Note for installing PCR and WFL<a class="headerlink" href="#note-for-installing-pcr-and-wfl" title="Permalink to this headline">¶</a></h2>
<p>Both hydrological models use the <a class="reference external" href="http://pcraster.geo.uu.nl/getting-started/pcraster-on-linux/installation-linux/">PCRaster</a> library within its modelling framework.
For a smooth GLOFRIM experience, please ensure PCRaster has been installed before installing PCR or WFL.
As both libraries written in python GLOFRIM can find the models as long as these are installed in the <strong>same python environment</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">WFL and PCR work with PCRaster v4.1.0, both models as well as GLOFRIM have not yet been tested with PCRaster v4.2.0.</p>
</div>
</div>
<div class="section" id="note-for-installing-cmf-lfp-and-dfm">
<h2>3.2. Note for installing CMF, LFP and DFM<a class="headerlink" href="#note-for-installing-cmf-lfp-and-dfm" title="Permalink to this headline">¶</a></h2>
<p>All hydrodynamic models are written in other than Python languages, such as Fortran anc C++. These models need to be compiled on your linux machines, check the
documentation of the individual models for more info.</p>
<p>The paths to the share libraries of each need to be provided to GLOFRIM. These can be set in the GLOFRIM ini file or provided in a file called environment.env
in the glofrim root dir in the <em>engines</em> section, see <a class="reference internal" href="running_GLOFRIM.html#the-glofrim-configuration-file"><span class="std std-ref">The GLOFRIM configuration file</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In addition to the source code, to setup local models and to generate the interpolation matrix for runoff inputs to CMF, additional Fortran scripts need to be compiled.
GLOFRIM requires the generate_inpmat.F script to setup the interpolation scheme based on domain of the upstream model in the model cascade.
Carefully follow the steps laid out in the README.txt in the glofim-py/script/generate_inpmat folder for more info.</p>
</div>
</div>
<div class="section" id="testing-your-installation">
<h2>3.3. Testing your installation<a class="headerlink" href="#testing-your-installation" title="Permalink to this headline">¶</a></h2>
<p>Once you’ve followed all steps above: installed GLOFRIM; the models you want to work with and you have set the environment.env file,
you can test your setup by running the unit tests provided in glofrim-py/tests folder.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="running_GLOFRIM.html" title="4. Running GLOFRIM"
             >next</a> |</li>
        <li class="right" >
          <a href="models.html" title="2. Model descriptions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GLOFRIM 2 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, J.M. Hoch et al..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>