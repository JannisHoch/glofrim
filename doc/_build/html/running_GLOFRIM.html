
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>4. Running GLOFRIM &#8212; GLOFRIM 2 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. Applications" href="applications.html" />
    <link rel="prev" title="3. GLOFRIM requirements and set-up" href="requirements.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="applications.html" title="5. Applications"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="requirements.html" title="3. GLOFRIM requirements and set-up"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GLOFRIM 2 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="requirements.html"
                        title="previous chapter">3. GLOFRIM requirements and set-up</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="applications.html"
                        title="next chapter">5. Applications</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="running-glofrim">
<span id="id1"></span><h1>4. Running GLOFRIM<a class="headerlink" href="#running-glofrim" title="Permalink to this headline">¶</a></h1>
<p>GLOFRIM exists of a series of uniformed BMI wrappers for each model and a overarching BMI wrapper for running coupled models.</p>
<div class="section" id="coupled-run">
<h2>4.1. Coupled run<a class="headerlink" href="#coupled-run" title="Permalink to this headline">¶</a></h2>
<p>To run a coupled model from python use the following lines.
The glofrim.ini (see example in root directory) configuration file hold the information of the individual model configuration files and exchanges between the models:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="c"># import GLOFRIM</span>
<span class="kn">from</span> <span class="nn">glofrim</span> <span class="k">import</span> <span class="n">Glofrim</span>
<span class="c"># initialize coupled bmi</span>
<span class="n">cbmi</span> <span class="o">=</span> <span class="n">Glofrim</span><span class="p">()</span>
<span class="c"># initialize the coupling with the glofrim.ini configuration file</span>
<span class="n">cbmi</span><span class="o">.</span><span class="n">initialize_config</span><span class="p">(</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">glofrim</span><span class="o">.</span><span class="n">ini</span><span class="p">)</span>
</pre></div>
</div>
<p>A basic model run uses the following statements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="c"># optional: get the model start time</span>
<span class="n">bmi</span><span class="o">.</span><span class="n">get_start_time</span><span class="p">()</span>
<span class="c"># initialize model</span>
<span class="n">bmi</span><span class="o">.</span><span class="n">initialize_model</span><span class="p">()</span>
<span class="c"># run until set endtime</span>
<span class="n">bmi</span><span class="o">.</span><span class="n">update_until</span><span class="p">(</span><span class="n">bmi</span><span class="o">.</span><span class="n">get_end_time</span><span class="p">())</span>
<span class="c"># finalize model</span>
<span class="n">bmi</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="stand-alone-run">
<h2>4.2. Stand-alone run<a class="headerlink" href="#stand-alone-run" title="Permalink to this headline">¶</a></h2>
<p>To run stand alone models via the GLOFRIM BMI wrapper you can use followed by the same statements as before:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="c"># import the CaMa-Flood bmi wrapper</span>
<span class="kn">from</span> <span class="nn">glofrim</span> <span class="k">import</span> <span class="n">CMF</span>
<span class="c"># intialize bmi with reference to engine (only for non-python models)</span>
<span class="n">bmi</span> <span class="o">=</span> <span class="n">CMF</span><span class="p">(</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">model_engine</span><span class="p">)</span>
<span class="n">bmi</span><span class="o">.</span><span class="n">initialize_config</span><span class="p">(</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">model_configuration_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="convenience-script">
<h2>4.3. Convenience script<a class="headerlink" href="#convenience-script" title="Permalink to this headline">¶</a></h2>
<p>The GLOFRIM library contains a script to run combined and single (for testing purposes) models with a single line from a terminal.
This script can be found in the glofirm-py/scripts folder.</p>
<p>GLOFRIM can be executed as follows on Linux command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="n">python</span> <span class="n">glofrim_runner</span><span class="o">.</span><span class="n">py</span> <span class="n">run</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">glofrim</span><span class="o">.</span><span class="n">ini</span> <span class="o">--</span><span class="n">env</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">glofrim</span><span class="o">.</span><span class="n">env</span> <span class="o">-</span><span class="n">s</span> <span class="n">startdate</span> <span class="o">-</span><span class="n">e</span> <span class="n">enddate</span>
</pre></div>
</div>
<p>Both <em>startdate</em> and <em>enddate</em> must be in yyyy-mm-dd format.</p>
</div>
<div class="section" id="help">
<h2>4.4. Help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h2>
<p>For more info on coupled runs, check:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre>python glofrim_runner.py run –help
</pre></div>
</div>
<p>and for stand-alone runs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre>python glofrim_runner.py run_single –help
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="applications.html" title="5. Applications"
             >next</a> |</li>
        <li class="right" >
          <a href="requirements.html" title="3. GLOFRIM requirements and set-up"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GLOFRIM 2 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, J.M. Hoch, D. Eilander, H. Ikeuchi.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>